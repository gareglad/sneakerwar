<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sneaker War</title>
    <style>
        body {
    font-family: Arial, sans-serif;
    background-color: #2c3e50;
    color: #ecf0f1;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
}

.game-container {
    text-align: center;
}

.game-board {
    display: flex;
    justify-content: space-around;
    margin: 20px 0;
}

.player {
    background-color: #34495e;
    padding: 20px;
    border-radius: 10px;
    width: 33vw;
    max-width: 200px;
    margin: 10px;
}

.card {
    background-color: #ecf0f1;
    color: #2c3e50;
    font-size: 2em;
    height: 300px;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 10px;
    margin: 10px 0;
}
.card img{
    width: 45vw;
    max-width: 200px;
    border-radius: 10px;
}

button {
    background-color: #e74c3c;
    color: white;
    border: none;
    padding: 10px 20px;
    font-size: 1em;
    border-radius: 5px;
    cursor: pointer;
}

button:hover {
    background-color: #c0392b;
}

    </style>
</head>
<body>
    <div class="game-container">
        <h1>Sneaker War</h1>
        <div class="game-board">
            <div class="player">
                <h2>Player 1</h2>
                <div class="card" id="player1-card"></div>
                <p id="player1-score">Score: 0</p>
            </div>
            <div class="player">
                <h2>Player 2</h2>
                <div class="card" id="player2-card"></div>
                <p id="player2-score">Score: 0</p>
            </div>
        </div>
        <button id="play-button">Play Round</button>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {

            var apiKey = 'AIzaSyB_Hjkb9nJaQjEqDXbt9Y-eunFTu7SGRxw';
            var spreadsheetId = '1ECJ_nXDreI8NUZcn7NYIvgKrmsycI7-1E9riOfHJ8gM';

            function get_card(id, callback) {
                var range = 'Sheet1!A' + id + ':Z' + id; // Adjust the range as needed
                var url = `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/${range}?key=${apiKey}`;

                $.ajax({
                    url: url,
                    type: 'GET',
                    success: function(data) {
                        console.log(data.values[0]);
                        callback(null, data.values[0]); // Call the callback with null error and the fetched data
                    },
                    error: function(error) {
                        console.error('Error fetching data:', error);
                        callback(error, null); // Call the callback with the error
                    }
                });
            }

            // var ran = Math.floor(Math.random() * 10);
            // get_card( ran );

            //get_card(2);

            const cards = [
                {   
                    id: 0,
                    name: 'Adidas NMD Runner',
                    points: 2000
                },{
                    id: 1,
                    name: 'Adidas NMD Runner',
                    points: 2000
                },
                {   
                    id: 2,
                    name: 'Air Jordan 4',
                    points: 12000
                },{
                    id: 3,
                    name: 'Adidas Ozweego',
                    points: 2100
                },{   
                    id: 4,
                    name: 'Adidas Yeezy Slides',
                    points: 9009
                },{
                    id: 5,
                    name: 'Nike Air Max Plus',
                    points: 2000
                },{   
                    id: 6,
                    name: 'New Balance 580',
                    points: 9000
                },{
                    id: 7,
                    name: 'Nike Air Max 97',
                    points: 20000
                },{   
                    id: 8,
                    name: 'Off-White Out Of Office',
                    points: 10000
                },{
                    id: 9,
                    name: 'Nike Dunk',
                    points: 19000
                },{
                    id: 10,
                    name: 'Nike Air Force 1',
                    points: 25000
                }
            ];
            //console.log();

            const suits = ['Hearts', 'Diamonds', 'Clubs', 'Spades'];
            const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
            let player1Score = 0;
            let player2Score = 0;

            function getCardValue(card) {
                // const value = card.split(' ')[0];
                // return values.indexOf(value);

                const value = cards[card].points;
                //console.log(value);

                return value;
            }

            function drawCard() {
                // const suit = suits[Math.floor(Math.random() * suits.length)];
                // const value = values[Math.floor(Math.random() * values.length)];
                // return `${value} of ${suit}`;

                // const card = cards[Math.floor(Math.random() * cards.length)];
                // console.log(card);
                var ran = Math.floor(Math.random() * 10);
                var card = get_card( ran );
                //console.log(card);
                return card;
            }

            function playRound() {
                var ran1 = Math.floor(Math.random() * 10);
                var ran2 = Math.floor(Math.random() * 10);

                get_card(ran1, function(error1, player1Card) {
                    if (error1) {
                        console.error('Error fetching player 1 card:', error1);
                        return;
                    }

                    get_card(ran2, function(error2, player2Card) {
                        if (error2) {
                            console.error('Error fetching player 2 card:', error2);
                            return;
                        }

                        // Update the DOM with the fetched data
                        $('#player1-card').html('<div data-id="'+player1Card[0]+'"><img src="https://raw.githubusercontent.com/gareglad/sneakerwar/main/'+player1Card[1]+'.jpg"></div>');
                        $('#player2-card').html('<div data-id="'+player2Card[0]+'"><img src="https://raw.githubusercontent.com/gareglad/sneakerwar/main/'+player2Card[1]+'.jpg"></div>');

                        const player1Value = getCardValue(player1Card[0]);
                        const player2Value = getCardValue(player2Card[0]);

                        if (player1Value > player2Value) {
                            player1Score++;
                            $('#player1-score').text(`Score: ${player1Score}`);
                        } else if (player2Value > player1Value) {
                            player2Score++;
                            $('#player2-score').text(`Score: ${player2Score}`);
                        }
                    });
                });
            }


            $('#play-button').click(function () {
                playRound();
                $('.card').css('background','none');
            });
        });

    </script>
</body>
</html>
